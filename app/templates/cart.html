{% extends "base.html" %}

{% block content %}

<br><br>
{% if current_user.is_authenticated %}
<h2>Products in Cart:</h2>
<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Product Name</th>
      <th scope="col">Quantity</th>
      <th scope="col">Unit Price</th>
      <th scope="col">Total Price</th>
    </tr>
  </thead>
  <tbody>
    {% for item in cart_items%}
      <tr id="row-{{ item.pid }}">
        <th scope="row">{{item.name}}</th>
        <td>
          <button class="decrement-quantity" data-item-id="{{ item.pid }}">-</button>
          <span id="quantity-{{ item.pid }}">{{ item.quantity }}</span>
          <button class="increment-quantity" data-item-id="{{ item.pid }}">+</button>
          <input id="delete-button" type="image" src="https://t4.ftcdn.net/jpg/03/01/07/99/360_F_301079914_TDcwbIag3uOp7dwNRWb0bqpfWeOzb6Xu.jpg" onclick="deleteItem('{{ item.pid }}')"/>
        </td>
        <td id="unit-price-{{ item.pid }}">{{ item.price }}</td>
        <td id="total-price-{{ item.pid }}">{{item.quantity * item.price}}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
<br>

<div id="overallSumContainer">
  <h2>Overall Sum: $0.00</h2>
</div>

<a href="{{ url_for('cart.cart') }}" type="button" class="btn btn-dark">Submit Order</a>

{% else %}
<p><a href="{{ url_for('users.login') }}">Log in</a> to see your cart!</p>
{% endif %}

<script src="static/js/cartAPI.js"></script>
{% endblock %}
